---
comments: true
title: DjVu
---

Это исчерпывающая сборка программ для создания, редактирования и чтения DjVu-файлов. С ее помощью ты можешь создать электронную книгу в формате DjVu с OCR-слоем (текстовым слоем) и содержанием.
<br><br>

#### Основной алгоритм:

1) Scan Tailor Universal - обработка изображений.

2) Book Restorer - выпрямление искривлённых изображений.

3) Tsushima - удаление марашек.

4) DjVu Small Mod 0.7.6.1 - создание DjVu-документа.

5) DjVu Imager - вставка цветных/серых иллюстраций.

6) ABBYY Finereader - создание OCR-слоя.

7) FR11 DjVu Text Layer Crutch - правка и перенос OCR-слоя.

8) Document Express Editor 6.0.1 - добавление обложки.

9) Pdf & DjVu Bookmarker - добавление содержания.

10) DjVu Hyperlinks Editor - добавление гиперссылок.

11) DjVu Annotations Editor - изменение стиля гиперссылок.

12) Document Express Editor 6.0.1 - редактирование гиперссылок.
<br><br>

#### Функции программ
<br>

**WinDjView** - программа для чтения .djvu файлов.

Alt+Left - вернуться обратно после перехода по гиперссылке.

Ctrl+M - изменить масштаб. Если предустановленные масштабы 150% и 200% не подходят, берём среднее арифметическое - 175%, если не подходит и это, то 162% или 187%. Если нужно чуть больше 150% - накидываем 6%.

При расплывчатом изображении необходимо перейти в Свойства->Совместимость->Изменить параметры высокого DPI->Изменить параметры для всех пользователей->Переопределите режим масштабирования высокого разрешения. Масштабирование выполняется:->Приложение.

<https://windjview.sourceforge.io/>
<br><br>

**IrfanView** - программа для конвертирования изображений.

<https://www.irfanview.com/64bit.htm>
<br><br>

**Scan Tailor Universal** - программа для обработки изображений.

Настройки:<br>
Общее->Спрашивать каждый раз. Снимаем галочку.<br>
Общее->Лента предпросмотра страниц->Размер кэшированных изображений (макс.): 1000 px<br>
Общее->Методы сжатия Tiff->Метод сжатия TIFF (ч/б): CCIITTFAX4<br>
Макетирование страницы->Поля. Везде 10.<br>
Макетирование страницы->Выравнивание->Автоматическое определение выравнивания. Ставим галочку.<br>
Вывод результатов->Показывать оригинал страницы при нажатом пробеле. Ставим галочку.<br>
Вывод результатов->Смешанный режим->Слой всего контента. Убираем галочку.

Новый проект... Выбери папку с изображениями. Затем из проекта можно убрать некоторые изображения, например, обложку.

Чтобы увеличить миниатюры изображений, жмёшь Alt и крутишь колёсико мыши.

Для удобного перемещения по миниатюрам используй клавиши pgup и pgdn.

**Ход обработки:**

1) Исправление ориентации

Поворот страниц на 90 градусов. Чтобы применить к группе изображений, жми Применить к... Выбери область действия.

2) Разрезка страниц

Если на изображениях есть кусок другой страницы или на изображениях по две страницы, запускай. Программа либо обрежет изображение, либо разделит на две. На всякий случай лучше проверь за программой и просмотри результат на миниатюрах.

3) Компенсация наклона

Исправление наклона текста.

4) Область контента

Программа автоматически находит контент страницы - накидывает на страницу прямоугольник, содержание которого будет взято в итоговую картинку. Опять же, запускай и затем проверяй за программой. В случае неточности правь в ручную.

5) Макетирование страниц

Если прямоугольник контента маленький, поля можно сделать 5 мм. Если обрабатываешь изображения вместе с обложкой, для обложки сделай нулевые поля и снять галочку с Выровнять размеры с другими страницами.

6) Вывод

Посмотри на результат бинаризации. Если пропадают части букв - ставь Порог бинаризации 20. В крайнем случае - 30. Повышенный Порог бинаризации прибавляет жирности тексту. Если книжка с иллюстрациями, используй режим Смешанный. Убери галочку Слой поиска иллюстраций. Поставь галочку Слой зон иллюстраций. Убери галочку Выровнять освещение, если иллюстрации теряют детали. Запускай вывод. Программа автоматически найдёт иллюстрации. После вывода проверь за программой. Просмотри все изображения с иллюстрациями. Параллельно разглядывай страницы на наличие пятен, которые можно удалить в разделе Зоны заливки. Если зона иллюстрации нашлась неправильно, подправь. Зайди в раздел Слои. Либо перетащи вершины. Либо удали зону и создай свою. Кликай правой кнопкой мыши по изображению, зажимай Ctrl, чтобы зона была прямоугольная, и выводи прямоугольник. Если зона сложной формы, проделай многоугольник. Используй зону иллюстраций на участке изображения, где текст плохо распознан (при бинаризации детали текста исчезнут). Раздели текст и иллюстрации. Инструменты->Экспорт изображений...->Экспорт результатов. После обработки изображений сохрани проект.

<http://forum.ru-board.com/topic.cgi?forum=5&topic=32945>
<br><br>

**Book Restorer** - программа для выпрямления искривлённых изображений. Создаём Книгу. Если нужно, можно оставить исходные имена файлов: Standart page->Свойства->Нумерация->Оригинальное имя. Выбери все файлы (Ctrl+A). Сервис->Реставрация->Геометрическая коррекция. Publish (иконка диска в меню). Когда распрямляешь чёрно-белые изображения в графе Тип файлов выбираем G4-сжатие, в графе Цветовая гамма - Черно-белая. Проверь результат. Если результат более искажён, чем исходное изображение, замени результат исходным изображением. Когда распрямляешь текст книжки с иллюстрациями, тебе нужно закинуть в программу полученные из Scan Tailor цветные изображения. При выводе в графе Тип файлов выбираем TIFF LZW-сжатие, в графе Цветовая гамма - RGB цвета. Распрямлённые изображения разбиваем на текст и иллюстрации в Scan Tailor.

<http://djvu-converter.narod.ru/><br>
<https://archive.org/details/book-restorer-v.-4.2.1>
<br><br>

**Tsushima** - программа для удаления марашек. Перетащите изображения на иконку программы. Результат - изображения в формате 8BPP 96DPI. Конвертируйте изображения в формат 1BPP 600DPI в IrfanView.

<http://publ.lib.ru/cgi/forum/YaBB.pl?num=1530528723/13#13>
<br><br>

**DjVu Small Mod 0.7.6.1** - программа для кодирования и декодирования DjVu-документов, то есть для создания DjVu-документа из изображений и извлечения изображений из DjVu-документов. Для чёрно-белых изображений используем следующий профиль кодирования:

Набор: Оригинальные

Тип: Черно-белый

dpi: 600

<https://book-scan.wixsite.com/djvu/blank-z8lfg>
<br><br>

**DjVu Imager** - программа для вставки иллюстраций. Указываем путь к DjVu-документу с вырезанными иллюстрациями и путь выходного файла. Указываем путь к папке out/export/pic. Нажимаем Пуск. Далее нажимаем вставить в DjVu. Получаем DjVu-документ с иллюстрациями. Настройки: ДЗФ - 2, DPI - 300.

<http://www.djvu-soft.narod.ru/scan/djvu_imager_en.htm>
<br><br>

**FSD** - аналог DjVu Small Mod + DjVu Imager.

<http://www.djvu-soft.narod.ru/soft/>

<https://www.youtube.com/watch?v=jOQBTV-zvts>
<br><br>

DjVu Small Mod + DjVu Imager и FSD реализуют метод разделённых сканов. Изображения разбиваются на текст и иллюстрации, которые кодируются отдельно.
<br><br>

**Document Express Editor 6.0.1** - программа для удаления/вставки изображений в DjVu-документ, используется при вставке обложки. Если появляется полоса в развёрнутом виде, используйте те же настройки совместимости, что и для WinDjView.

<http://www.djvu-soft.narod.ru/soft/>
<br><br>

**ABBYY Finereader** - программа, накладывающая OCR-слой на DjVu-документ, может быть использована для извлечения из PDF-документа изображений в формате TIF. В настройках ставишь галочку Без предобработки, чтобы при извлечении OCR-слоя текст лег на своё место. Обязательно использование Тщательного распознавания. При распознавании литературы на русском языке выбираем язык распознавания Русский и английский. Так как в выходном DjVu-документе нужен только текстовый слой, для ускорения вывода DjVu-документа можно изменить настройки экспорта DjVu на максимальное сжатие.

<https://btdig.com/db98398f6d1c9bbd4c8ac905dc30abb5f9e4b704/abbyy-finereader-kpojiuk>
<br><br>

**FR11 DjVu Text Layer Crutch** - программа для исправления OCR-слоя из созданного программой Finereader DjVu-документа и вставки в исходный DjVu-документ (в выходном DjVu-документе Finereader цветные/серые иллюстрации теряют в качестве).

<https://forum.ru-board.com/topic.cgi?forum=5&topic=38467>
<br><br>

**DjVu Clean Page Inserter** - программа для вставки пустых страниц в DjVu-документ.

<https://forum.ru-board.com/topic.cgi?forum=5&topic=38467>
<br><br>

**Pdf & DjVu Bookmarker** - программа для добавления содержания. Копируем текст содержания. Вставляем в программу. Редактируем. Есть возможность расположения закладок в виде иерархической структуры. Вставляем в DjVu-документ. Советую обратить внимание на клавиши F2 и F3, в значительной мере ускоряющие работу над содержанием.

<https://sourceforge.net/projects/djvubookmarker/>
<br><br>

**DjVu Hyperlinks Editor** - программа для автоматического создания гиперссылок. Для работы программы необходим OCR-слой. Как смещение указываем на сколько номер страницы DjVu-документа больше номера страницы книги. Затем указываем страницы документа у содержания / алфавитного указателя. Выбираем Тип работы Содержание / Алфавитный указатель 2. Создадутся 'гиперссылки, видимые при наведении курсора на содержание' / 'гиперссылки в алфавитном указателе'.

<http://www.djvu-soft.narod.ru/soft/>
<br><br>

**DjVu Annotations Editor** - программа для изменения свойств гиперссылок. Переходим в Свойства гиперссылок. Выбираем Отображать постоянно (если изменяем гиперссылки алфавитного указателя), отключаем заливку и стираем комментарий. Применить. Сохранить. Открываем DjVu-документ в программе Document Express Editor 6.0.1 и удаляем гиперссылки на номерах страниц - Annotation->Delete. Для ручного удаления/добавления гиперссылок содержания необходимо нажать в меню Select Annotations - гиперссылки содержания станет видно. Далее, например, можно исправить края гиперссылки, перекрывшей несколько пунктов содержания и создать недостающую гиперссылку, нажав в меню Rectangular Hyperlink и выделив пункт содержания. В графе Style выбираем Plain Border, Persistent, в графе Link - Page Number, а графе Page – страницу документа.

<https://forum.ru-board.com/topic.cgi?forum=5&topic=38467>
<br><br>

**DjVu Chunk Remover** - программа для удаления блоков (чанков), а также страниц из файлов формата DjVu.

<https://forum.ru-board.com/topic.cgi?forum=5&topic=38467>
<br><br>

Zip-архив с программами на случай, если ссылки сломаются - <https://disk.yandex.ru/d/odtW8TX4diIVsg>
<br><br>

#### Где опубликовать книгу:

Library Genesis - <https://libgen.li/librarian.php>

Z-Library - <https://singlelogin.re/book-add>

RuTracker - <https://rutracker.org/forum/index.php>

VK - <https://vk.com/docs>
<br><br>

#### Информация:

<http://www.djvu-soft.narod.ru/>

<http://publ.lib.ru/cgi/forum/YaBB.pl>